<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <link rel="stylesheet" href="assets/css/main.css">
  <!-- <link href="https://unpkg.com/tailwindcss@^1.0/dist/tailwind.min.css" rel="stylesheet"> -->
</head>
<body>

<div>
  <h1 class="text-xl font-bolder px-2">Please sign or initial below:</h1>
  <canvas id="CANVAS" class="border border-8">
    Sorry, this device is not supported.  Try updating your browser.
  </canvas>
  <div class="w-full flex justify-between pt-2 px-2">
    <button id="CLEAR-BTN" class="bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded">Clear</button>
    <button id="SUBMIT-SIG-BTN" class="bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded">SUBMIT</button>
  </div>
</div>


<script>
  (function() {
    var el = document.getElementById('CANVAS'),  ctx = el.getContext('2d'), isDrawing;
    var clearBtn = document.getElementById('CLEAR-BTN');
    var submitSignatureBtn = document.getElementById('SUBMIT-SIG-BTN');

    var that = this;
    clearBtn.addEventListener('click', event => {
      console.log("CLICKED CLEAR");
      ctx.clearRect(0, 0, window.innerWidth, window.innerHeight);
    })

    if (ctx) {
      // resize the canvas to fill browser window dynamically
      window.addEventListener('resize', resizeCanvas, false);

      function resizeCanvas() {
        el.width = window.innerWidth;
        el.height = (el.width/2) > window.innerHeight ? window.innerHeight : el.width/2
      }
      resizeCanvas();

      el.onmousedown = function(e) {
        console.log( "mousedown e = ", e + " isDrawing = " + isDrawing)
        isDrawing = true;
        ctx.lineWidth = 5;
        ctx.lineJoin = ctx.lineCap = "round";
        ctx.shadowBlur = 5;
        ctx.shadowColor = 'rgb(0, 0, 0)';
        ctx.moveTo(e.clientX, e.clientY);
      }
      el.onmousemove = function(e) {
        if(isDrawing) {
          ctx.lineTo(e.clientX, e.clientY);
          ctx.stroke();
        }
      }
      el.onmouseup = function(e) {
        ctx.lineTo(e.clientX, e.clientY);
        ctx.stroke();
        isDrawing = false;
      }

    }
  })();
</script>
</body>
</html>